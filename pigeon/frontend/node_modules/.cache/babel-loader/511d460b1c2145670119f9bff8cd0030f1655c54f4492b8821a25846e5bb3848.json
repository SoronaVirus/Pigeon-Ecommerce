{"ast":null,"code":"import api from '../config/api';\nexport const authService = {\n  async login(username, password) {\n    const response = await api.post('/auth/login', {\n      username,\n      password\n    });\n    const {\n      token,\n      ...user\n    } = response.data;\n    localStorage.setItem('token', token);\n    localStorage.setItem('user', JSON.stringify(user));\n    return response.data;\n  },\n  async register(username, email, password) {\n    return await api.post('/auth/register', {\n      username,\n      email,\n      password\n    });\n  },\n  logout() {\n    localStorage.removeItem('token');\n    localStorage.removeItem('user');\n  },\n  getCurrentUser() {\n    const user = localStorage.getItem('user');\n    return user ? JSON.parse(user) : null;\n  },\n  isAuthenticated() {\n    return !!localStorage.getItem('token');\n  },\n  isAdmin() {\n    var _user$roles;\n    const user = this.getCurrentUser();\n    return user === null || user === void 0 ? void 0 : (_user$roles = user.roles) === null || _user$roles === void 0 ? void 0 : _user$roles.includes('ROLE_ADMIN');\n  }\n};","map":{"version":3,"names":["api","authService","login","username","password","response","post","token","user","data","localStorage","setItem","JSON","stringify","register","email","logout","removeItem","getCurrentUser","getItem","parse","isAuthenticated","isAdmin","_user$roles","roles","includes"],"sources":["C:/Users/justi/Documents/Cours_SupDeVinci/B3/Cours/Java/pigeon/frontend/src/services/AuthService.js"],"sourcesContent":["import api from '../config/api';\r\n\r\nexport const authService = {\r\n    async login(username, password) {\r\n        const response = await api.post('/auth/login', { username, password });\r\n        const { token, ...user } = response.data;\r\n        localStorage.setItem('token', token);\r\n        localStorage.setItem('user', JSON.stringify(user));\r\n        return response.data;\r\n    },\r\n\r\n    async register(username, email, password) {\r\n        return await api.post('/auth/register', { username, email, password });\r\n    },\r\n\r\n    logout() {\r\n        localStorage.removeItem('token');\r\n        localStorage.removeItem('user');\r\n    },\r\n\r\n    getCurrentUser() {\r\n        const user = localStorage.getItem('user');\r\n        return user ? JSON.parse(user) : null;\r\n    },\r\n\r\n    isAuthenticated() {\r\n        return !!localStorage.getItem('token');\r\n    },\r\n\r\n    isAdmin() {\r\n        const user = this.getCurrentUser();\r\n        return user?.roles?.includes('ROLE_ADMIN');\r\n    }\r\n};"],"mappings":"AAAA,OAAOA,GAAG,MAAM,eAAe;AAE/B,OAAO,MAAMC,WAAW,GAAG;EACvB,MAAMC,KAAKA,CAACC,QAAQ,EAAEC,QAAQ,EAAE;IAC5B,MAAMC,QAAQ,GAAG,MAAML,GAAG,CAACM,IAAI,CAAC,aAAa,EAAE;MAAEH,QAAQ;MAAEC;IAAS,CAAC,CAAC;IACtE,MAAM;MAAEG,KAAK;MAAE,GAAGC;IAAK,CAAC,GAAGH,QAAQ,CAACI,IAAI;IACxCC,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEJ,KAAK,CAAC;IACpCG,YAAY,CAACC,OAAO,CAAC,MAAM,EAAEC,IAAI,CAACC,SAAS,CAACL,IAAI,CAAC,CAAC;IAClD,OAAOH,QAAQ,CAACI,IAAI;EACxB,CAAC;EAED,MAAMK,QAAQA,CAACX,QAAQ,EAAEY,KAAK,EAAEX,QAAQ,EAAE;IACtC,OAAO,MAAMJ,GAAG,CAACM,IAAI,CAAC,gBAAgB,EAAE;MAAEH,QAAQ;MAAEY,KAAK;MAAEX;IAAS,CAAC,CAAC;EAC1E,CAAC;EAEDY,MAAMA,CAAA,EAAG;IACLN,YAAY,CAACO,UAAU,CAAC,OAAO,CAAC;IAChCP,YAAY,CAACO,UAAU,CAAC,MAAM,CAAC;EACnC,CAAC;EAEDC,cAAcA,CAAA,EAAG;IACb,MAAMV,IAAI,GAAGE,YAAY,CAACS,OAAO,CAAC,MAAM,CAAC;IACzC,OAAOX,IAAI,GAAGI,IAAI,CAACQ,KAAK,CAACZ,IAAI,CAAC,GAAG,IAAI;EACzC,CAAC;EAEDa,eAAeA,CAAA,EAAG;IACd,OAAO,CAAC,CAACX,YAAY,CAACS,OAAO,CAAC,OAAO,CAAC;EAC1C,CAAC;EAEDG,OAAOA,CAAA,EAAG;IAAA,IAAAC,WAAA;IACN,MAAMf,IAAI,GAAG,IAAI,CAACU,cAAc,CAAC,CAAC;IAClC,OAAOV,IAAI,aAAJA,IAAI,wBAAAe,WAAA,GAAJf,IAAI,CAAEgB,KAAK,cAAAD,WAAA,uBAAXA,WAAA,CAAaE,QAAQ,CAAC,YAAY,CAAC;EAC9C;AACJ,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}